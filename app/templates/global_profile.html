{% extends "base.html" %}

{% block head %} <link href="../static/css/global_profile.css" rel="stylesheet" />{% endblock %}
{% block Title %}Profile{% endblock %}
{% block content %}
        <div id="app">
            <navbar></navbar>
            <user-header
                fallowed
                username="علی"
                medals="[
                [
                    'https://cdn0.iconfinder.com/data/icons/education-127/128/73-512.png',
                    'مدال افتخار'
                ],
                [
                    'https://cdn2.iconfinder.com/data/icons/award-vol-3-glyph/74/Untitled-2-29-512.png',
                    'نویسنده خوب'
                ]
                ,
                [
                    'https://cdn2.iconfinder.com/data/icons/award-vol-3-glyph/74/Untitled-2-29-512.png',
                    'نویسنده خوب'
                ]
                ]"
            ></user-header>
        </div>
        {% endblock content %}
        {% block script %}
            Vue.component("navbar-item", {
                props: {
                    text: {},
                    href: {},
                    active: {
                        default: false,
                    },
                },
                template: `
              <a ref="a" class="navbar-item" v-html="text" :href="href"></a>
              `,
            });

            Vue.component("navbar", {
                props: {
                    active_item: {
                        default: false,
                    },
                    message_count: {
                        default: 0,
                    },
                },
                data() {
                    return {};
                },
                template: `<nav class="nav">
                  <img class="logo" src="https://cdn-icons-png.flaticon.com/512/4096/4096358.png" />
                  <div class="nav-items">
                    <navbar-item href="#" ref="profile" text="پروفایل" :class="{ active: active_item === 'profile' }"></navbar-item>
                    <navbar-item href="#" ref="dasboard" text="پازار" :class="{ active: active_item === 'pazar' }"></navbar-item>
                    <navbar-item href="#" ref="chatroom" text="گفتگو" :class="{ active: active_item === 'chat' }"></navbar-item>
                    <navbar-item href="#" ref="chatroom" text="خانه" :class="{ active: active_item === 'home' }"></navbar-item>
                  </div>
                  <div class="profile-nav">
                      <i class="fa-solid fa-envelope"><div v-if="message_count" class="note_num">3</div></i>
                      <img class="profile-pic" src="https://cdn-icons-png.flaticon.com/512/4096/4096358.png" />
                  </div>
              </nav>`,
            });

            Vue.component("user-header", {
                props: {
                    medals: {
                        default: [],
                    },
                    username: {},
                    fallowed: {
                        default: false,
                    },
                    fallower_count: {
                        default: 0,
                    },
                },
                data() {
                    return {
                        medals_: eval(this.medals),
                        color: this.fallowed ? "blue" : "red",
                        text: this.fallowed ? "دنبال کردن" : "دنبال نکردن",
                    };
                },
                methods: {
                    fallow() {
                        // this.text = `<svg xmlns="http://www.w3.org/2000/svg" width="65" height="20" viewBox="0 0 65 20" stroke="#fff" capture-installed="true">
                        //                 <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="1">
                        //                 <circle cx="3" cy="10" r="3" stroke-opacity="0">
                        //                     <animate id="so1" attributeName="stroke-opacity" begin="0s;so4.end" dur="1.1s" values="0;1;0"></animate>
                        //                 </circle>
                        //                 <circle cx="22" cy="10" r="3" stroke-opacity="0">
                        //                     <animate id="so2" attributeName="stroke-opacity" begin="so1.end - .9s" dur="1.1s" values="0;1;0"></animate>
                        //                 </circle>
                        //                 <circle cx="41" cy="10" r="3" stroke-opacity="0">
                        //                     <animate id="so3" attributeName="stroke-opacity" begin="so2.end - .9s" dur="1.1s" values="0;1;0"></animate>
                        //                 </circle>
                        //                 <circle cx="60" cy="10" r="3" stroke-opacity="0">
                        //                     <animate id="so4" attributeName="stroke-opacity" begin="so3.end - .9s" dur="1.1s" values="0;1;0"></animate>
                        //                 </circle>
                        //                 </g>
                        //             </svg>`;
                        this.text = `<svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" stroke="#fff" capture-installed="true">
                            <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="0">
                                <line x1="3" y1="20" x2="41" y2="20" x1="3" y1="4" x2="41" y2="4" stroke-width="8" stroke-linecap="round">
                                <animate id="lineFly1" attributeName="x1" dur="1s" begin="0s;lineFly2.end" values="3; 41; 3" fill="freeze"></animate>
                                <animate id="lineFly2" attributeName="x2" dur="1.5s" begin="lineFly1.end" values="41; 3; 41"></animate>
                                <animate id="strokeColor" attributeName="stroke" dur=".5s" begin="lineFly1.end + .4s" values="#fff; #fff; #fff"></animate>
                                </line>
                            </g>
                        </svg>`;

                        setTimeout(() => {
                            this.fallowed = !this.fallowed;
                            this.color = this.fallowed ? "blue" : "red";
                            this.text = this.fallowed
                                ? "دنبال کردن"
                                : "دنبال نکردن";
                        }, 2500);
                    },
                },
                template: `
    <div>
    <div class="user-header">
        <img
            src="https://wordpress.iqonic.design/product/wp/socialv/wp-content/uploads/avatars/18/1656590512-bpfull.jpg"
        />
        <h3>{{ username }}</h3>
        <div class="details">
            <div style="padding-top: 10px" class="box">
                <p>🪙</p>
                <p style="font-size: 2rem">130</p>
            </div>
            <div v-for="item in medals_" class="box">
                <img
                    :src="item[0]"
                />
                <p style="font-size: 1rem">{{ item[1] }}</p>
            </div>
        </div>
        <v-btn @click="fallow" :color="color" v-html="text" X-Large></v-btn>
        <p dir="rtl">{{ fallower_count }} دنبال کننده </p>
    </div>
    <div class="menus">
        <a class="item">دنبال شوندگان</a>
        <a class="item">دنبال کنندگان</a>
        <a class="item">نظرات</a>
        <a class="item">پست ها</a>
    </div>
</div>
    `,
            });

            new Vue({
                el: "#app",
            });
{% endblock %}