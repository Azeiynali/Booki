{% extends "base.html" %} {% block head %}
<link rel="stylesheet" href="../static/css/home.css" />
<meta name="description" content="ÙˆØ¨ Ø³Ø§ÛŒØª Ø¨ÙˆÚ©ÛŒ ÛŒÚ© Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø§Ù…Ù† Ùˆ Ùˆ Ø³Ø§Ù„Ù… Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ Ø§Ø³ØªØŒ Ø§ÛŒÙ† ÙˆØ¨Ø³Ø§ÛŒØª Ø´Ø¨Ø§Ù‡Øª Ø²ÛŒØ§Ø¯ÛŒ Ø¨Ù‡ Ù¾ÛŒØ§Ù… Ø±Ø³Ø§Ù† Ù‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ø¯Ø§Ø±Ø¯ Ùˆ Ú©Ø§Ù…Ù„Ø§ Ø§ÛŒØ±Ø§Ù†ÛŒ Ùˆ Ø¨ÙˆÙ…ÛŒ Ø³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª." />

<!-- for social nets -->
<meta name="og:title" content="Booki" />
<meta name="og:description" content="ÙˆØ¨ Ø³Ø§ÛŒØª Ø¨ÙˆÚ©ÛŒ ÛŒÚ© Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø§Ù…Ù† Ùˆ Ùˆ Ø³Ø§Ù„Ù… Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ Ø§Ø³ØªØŒ Ø§ÛŒÙ† ÙˆØ¨Ø³Ø§ÛŒØª Ø´Ø¨Ø§Ù‡Øª Ø²ÛŒØ§Ø¯ÛŒ Ø¨Ù‡ Ù¾ÛŒØ§Ù… Ø±Ø³Ø§Ù† Ù‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ø¯Ø§Ø±Ø¯ Ùˆ Ú©Ø§Ù…Ù„Ø§ Ø§ÛŒØ±Ø§Ù†ÛŒ Ùˆ Ø¨ÙˆÙ…ÛŒ Ø³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª." />
<meta name="og:image" content="/static/pictures/preview.png" />

{% endblock %} {% block
Title %}Booki - Ø®Ø§Ù†Ù‡{% endblock %} {% block content %}
<div id="app">
    <navbar active_item="home" avatar="{{ current_user.avatar }}"
        message_count="{{ not_list }}"></navbar>
        {% for user in users %}
        {% endfor %}
    <site-header items='
                [
                    {% for user in users %}
                        {"user_img": "{{ user.avatar }}",
                        "user_href": "/@{{ user.username }}",
                        "username": "{{ user.name[:8] }}"},
                    {% endfor %}
                ]
            '>
    </site-header>
    <div class="flex flex-none justify-center" style="width: 95vw;">
        <div class="w-3/4 mx-50 my-auto text-center mt-10">
            {% for post in posts %}
            <post {% if post.writer==current_user %} iw="True" {% endif %}
                content="{{ post.content }}" id="{{ post.id }}"
                image="{{ post.img }}"
                username="{{ post.writer.name }}" avatar="{{ post.writer.avatar }}" date="{{ fAge(post.date) }}"
                classes="post img-container min-h-40 rounded-xl mb-5 p-3 bg-[#fefefe]" {% if Like.query.filter_by(liked=post.id, liker=current_user.id).all() %}
                like_classes="liked" {% endif %} likes="{{ Like.query.filter_by(liked=post.id).all() | length }}" comment_length="{{ post.comments | length }}">
            </post>
            {% endfor %}
            {% if posts_length > 50 %}
            <a class="inline-block bg-[#005be4] px-5 py-1 rounded text-white text-lg mx-auto hover:text-xl transition-all duration-300 ease-out" href="/page/{{ pagination + 1 }}">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨ÛŒØ´ØªØ±</a>
            {% endif %}
        </div>

    </div>
</div>

{% raw %}
<script>
    // this is site header with all followers
    Vue.component("site-header", {
        props: ["items"],
        data() {
            return {
                items_dict: eval(this.items),
            };
        },
        template: `
            <header ref="root" class="flex flex-none overflow-x-auto overflow-y-hidden justify-start mx-auto mt-16 w-full p-2 right-0">
                <a :href="item.user_href" v-for="item in items_dict" class="relative flex items-center justify-center flex-col flex-none">
                    <img :src="item.user_img" class="flex justify-s\\tart text-lg w-9/10 text-[#292929] gap-2 relative h-20 rounded-full user items-center mx-3" />
                    <p class="text-xl">{{ item.username }}</p>
                </a>
            </header>
                    `,
    });

    // this is post Vue component
    // {% endraw %}
    
    {% include "inc/post.js" %}

    // {% raw %}
    
    // user Vue component
    Vue.component("user", {
        props: ["img", "score", "href", "username"],
        template: `
                        <div style="transform: scale(.7);margin-left: 23%;" dir="rtl" class="flex justify-start text-lg w-9/10 text-[#292929] gap-2 relative h-20 user items-center mr-5">
                                <a :href="href">
                                    <img :src="img" />
                                </a>
                                <a :href="href">
                                    <div>
                                        <p>
                                            {{ username }}

                                        </p>
                                        <small>ðŸª™{{ score }}</small>
                                    </div>
                                </a>
                            </div>
                        `,
    });

    new Vue({
        el: "#app",
    });
</script>
{% endraw %} {% endblock %}